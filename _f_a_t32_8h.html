<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SABT Software: SABT_MainUnit/FAT32.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SABT_MainUnit/FAT32.h File Reference</h1>
<p>FAT32 implementation of SD card ******************************************************** **** ROUTINES FOR FAT32 IMPLEMATATION OF SD CARD ***** ******************************************************** Controller: ATmega32 (Clock: 8 Mhz-internal) Compiler : AVR-GCC (winAVR with AVRStudio) Version : 2.3 Author : CC Dharmani, Chennai (India) www.dharmanitech.com Date : 08 May 2010 
<a href="#_details">More...</a></p>

<p><a href="_f_a_t32_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_b_rinfo___structure.html">MBRinfo_Structure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpartition_info___structure.html">partitionInfo_Structure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_b_s___structure.html">BS_Structure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_s_info___structure.html">FSInfo_Structure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdir___structure.html">dir_Structure</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef018487342a3344aa32ee15ddcb4410"></a><!-- doxytag: member="FAT32.h::ATTR_READ_ONLY" ref="aef018487342a3344aa32ee15ddcb4410" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_READ_ONLY</b>&nbsp;&nbsp;&nbsp;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a42249a182dc832d4647b67281c2ffc90"></a><!-- doxytag: member="FAT32.h::ATTR_HIDDEN" ref="a42249a182dc832d4647b67281c2ffc90" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_HIDDEN</b>&nbsp;&nbsp;&nbsp;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c1250075cd2ca065a67a44fc9fc3222"></a><!-- doxytag: member="FAT32.h::ATTR_SYSTEM" ref="a1c1250075cd2ca065a67a44fc9fc3222" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_SYSTEM</b>&nbsp;&nbsp;&nbsp;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab14d118689e61ffb3e29f83d38f1f135"></a><!-- doxytag: member="FAT32.h::ATTR_VOLUME_ID" ref="ab14d118689e61ffb3e29f83d38f1f135" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_VOLUME_ID</b>&nbsp;&nbsp;&nbsp;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa13d3c1c60925f7b1e639233a799860"></a><!-- doxytag: member="FAT32.h::ATTR_DIRECTORY" ref="afa13d3c1c60925f7b1e639233a799860" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_DIRECTORY</b>&nbsp;&nbsp;&nbsp;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b257aa7e0fdd8b11372edf885302176"></a><!-- doxytag: member="FAT32.h::ATTR_ARCHIVE" ref="a1b257aa7e0fdd8b11372edf885302176" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_ARCHIVE</b>&nbsp;&nbsp;&nbsp;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4530dded7bddf70573cbc1fc4515367e"></a><!-- doxytag: member="FAT32.h::ATTR_LONG_NAME" ref="a4530dded7bddf70573cbc1fc4515367e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ATTR_LONG_NAME</b>&nbsp;&nbsp;&nbsp;0x0f</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a708effadc6982b89faaf84eab0d56d76"></a><!-- doxytag: member="FAT32.h::DIR_ENTRY_SIZE" ref="a708effadc6982b89faaf84eab0d56d76" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DIR_ENTRY_SIZE</b>&nbsp;&nbsp;&nbsp;0x32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b7cf2a3641be7b89138615764d60ba3"></a><!-- doxytag: member="FAT32.h::EMPTY" ref="a2b7cf2a3641be7b89138615764d60ba3" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>EMPTY</b>&nbsp;&nbsp;&nbsp;0x00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab792dfd97ab00abb6a5fc20191a9e952"></a><!-- doxytag: member="FAT32.h::DELETED" ref="ab792dfd97ab00abb6a5fc20191a9e952" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DELETED</b>&nbsp;&nbsp;&nbsp;0xe5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a982a66f513611f7f83ebfa4b4ecf1df9"></a><!-- doxytag: member="FAT32.h::GET" ref="a982a66f513611f7f83ebfa4b4ecf1df9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>GET</b>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59da1d65e87a723efe808dbabb4fc205"></a><!-- doxytag: member="FAT32.h::SET" ref="a59da1d65e87a723efe808dbabb4fc205" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SET</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada74e7db007a68e763f20c17f2985356"></a><!-- doxytag: member="FAT32.h::READ" ref="ada74e7db007a68e763f20c17f2985356" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>READ</b>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab64044259d5a2440725279dc7801f33e"></a><!-- doxytag: member="FAT32.h::VERIFY" ref="ab64044259d5a2440725279dc7801f33e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>VERIFY</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97fe5470fb1ac167c713671655ff3e52"></a><!-- doxytag: member="FAT32.h::ADD" ref="a97fe5470fb1ac167c713671655ff3e52" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ADD</b>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9959e75e26bc66b3733ddc04de6b4cf"></a><!-- doxytag: member="FAT32.h::REMOVE" ref="ab9959e75e26bc66b3733ddc04de6b4cf" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>REMOVE</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab811d8c6ff3a505312d3276590444289"></a><!-- doxytag: member="FAT32.h::LOW" ref="ab811d8c6ff3a505312d3276590444289" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LOW</b>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5bb885982ff66a2e0a0a45a8ee9c35e2"></a><!-- doxytag: member="FAT32.h::HIGH" ref="a5bb885982ff66a2e0a0a45a8ee9c35e2" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>HIGH</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06dfea051e603d2b87c6f5df322838e7"></a><!-- doxytag: member="FAT32.h::TOTAL_FREE" ref="a06dfea051e603d2b87c6f5df322838e7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>TOTAL_FREE</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4adc951e93b4d0152fbd792c9fbee411"></a><!-- doxytag: member="FAT32.h::NEXT_FREE" ref="a4adc951e93b4d0152fbd792c9fbee411" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>NEXT_FREE</b>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0cc54057c5dc1d7b693f95420adedf72"></a><!-- doxytag: member="FAT32.h::GET_LIST" ref="a0cc54057c5dc1d7b693f95420adedf72" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>GET_LIST</b>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf1ff268922f8fc22293d87c75017085"></a><!-- doxytag: member="FAT32.h::GET_FILE" ref="adf1ff268922f8fc22293d87c75017085" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>GET_FILE</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abbbe5949f3c1f72e439924f8cf503509"></a><!-- doxytag: member="FAT32.h::DELETE" ref="abbbe5949f3c1f72e439924f8cf503509" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DELETE</b>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59adc4c82490d23754cd39c2fb99b0da"></a><!-- doxytag: member="FAT32.h::EOF" ref="a59adc4c82490d23754cd39c2fb99b0da" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>EOF</b>&nbsp;&nbsp;&nbsp;0x0fffffff</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a1a404adb1477372c136ee3d8ec370bef">getBootSectorData</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads in data data from boot sector and checks to make sure that it is the FAT32 standard.  <a href="#a1a404adb1477372c136ee3d8ec370bef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a7e2988f898a6b56ba385ae2c34128a86">getFirstSector</a> (unsigned long clusterNumber)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">calculates the first sector address of any given cluster  <a href="#a7e2988f898a6b56ba385ae2c34128a86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a44efd4747cb07a0a1cf3784c838b6a6e">getSetFreeCluster</a> (unsigned char totOrNext, unsigned char get_set, unsigned long FSEntry)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function is used to get or set next free cluster or total free clusters in FSinfo sector of SD card.  <a href="#a44efd4747cb07a0a1cf3784c838b6a6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdir___structure.html">dir_Structure</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#acb92769ff06a9d54732e7ff22ec07eef">findFiles</a> (unsigned char flag, unsigned char *fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function gets DIR/FILE list or a single file address or deletes specified file  <a href="#acb92769ff06a9d54732e7ff22ec07eef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#ab0d24683088974e34e652dcf46037c9f">getSetNextCluster</a> (unsigned long clusterNumber, unsigned char get_set, unsigned long clusterEntry)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get cluster entry value from FAT to find out the next cluster in chain  <a href="#ab0d24683088974e34e652dcf46037c9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#ab213e22a70270c138864e3075aa51fb8">readFile</a> (unsigned char flag, unsigned char *fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Can act as a reader or verifier depending on the flag sent in in flag If it is VERIFY- just wil let you know if the file is there. If it is read then it actually reads in the contents of the file.  <a href="#ab213e22a70270c138864e3075aa51fb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#aee620dcede02bf8349f704e598d90d89">readAndRetreiveFileContents</a> (unsigned char *fileName, unsigned char *dataString)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This file just reads in data from the given fileName if it can find and and process the file.  <a href="#aee620dcede02bf8349f704e598d90d89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#afdef267b8305837acbd02add6ad7f23e">PlayMP3file</a> (unsigned char *fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function plays a given MP3 files, until: 1. The files reach the end of file 2. Stop playing command issued from the controller.  <a href="#afdef267b8305837acbd02add6ad7f23e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a126f62cbfb84a23224d07d7eebb1f377">convertFileName</a> (unsigned char *fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts the input fileName (which is in FAT format) in the following fashion: &lt;filename.ext&gt; -----&gt; &lt;filename[padding to 8 chars]ext&gt; filename must be &lt;= 8 chars and ext must be &lt;= 3 chars. Thus, INT.MP3 becomes [INT MP3]. Also, capitalizes lowercase files.  <a href="#a126f62cbfb84a23224d07d7eebb1f377"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a1fea385b9800617fcb1cad4f5493ea67">ReplaceTheContentOfThisFileWith</a> (unsigned char *fileName, unsigned char *fileContent)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">reads the data in fileContent into buffer and uses the function <a class="el" href="_s_d__routines_8c.html#aa72e78c5d2b4664dfdbb339030a1798c" title="Writes a single block of SD Card. Data that is written is put into the buffer variables...">SD_writeSingleBlock()</a> to put the value in buffer onto the SD card Data you are writing in MUST END IN $. If not garbage will be written in.  <a href="#a1fea385b9800617fcb1cad4f5493ea67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a18f109c80cfc13f98d54b936a8f89f1a">writeFile</a> (unsigned char *fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function creates a file in FAT32 format in the root directory if given file name does not exists. If it already exists then append data to end  <a href="#a18f109c80cfc13f98d54b936a8f89f1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2257b158f7a4303f5914ef300e2e62b"></a><!-- doxytag: member="FAT32.h::appendFile" ref="ad2257b158f7a4303f5914ef300e2e62b" args="(void)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>appendFile</b> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a92d056bee6b45c23b0b06fd4390daaba">searchNextFreeCluster</a> (unsigned long startCluster)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function searches for the next free cluster in the root directory starting at specified cluster  <a href="#a92d056bee6b45c23b0b06fd4390daaba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a8b15151c2fa2f87cfcb8ff703c4d64cc">memoryStatistics</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function displays the total memory and free memory of SD Card using UART NOTE: this routine can take upto 15sec for 1GB card ( clock) it tries to read from SD whether a free cluster count is stored, if it is stored then it will return immediately. Otherwise it will count the total number of free clusters, which takes time  <a href="#a8b15151c2fa2f87cfcb8ff703c4d64cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#ac038c8795e541cbd5a33eda705b01934">displayMemory</a> (unsigned char flag, unsigned long memory)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function converts the unsigned long value of memory into text string and send ot UART  <a href="#ac038c8795e541cbd5a33eda705b01934"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#aae257afc618304098844252c3d71b788">deleteFile</a> (unsigned char *fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function deletes the specified file in the root directory  <a href="#aae257afc618304098844252c3d71b788"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a546d211c1f6659e26fc0eae87393bff0">freeMemoryUpdate</a> (unsigned char flag, unsigned long size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function updates the free memory count in FSinfo sector. Whenever a file is deleted or created, this function will be called to ADD or REMOVE clusters occupied by teh file  <a href="#a546d211c1f6659e26fc0eae87393bff0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_f_a_t32_8h.html#a9912b92d9e9f9ec6217a023f7d1d046e">InitSDCard</a> (bool bVerb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks the SD card, communicates with computer to let know what type of card and sets up the rest of the SD card.  <a href="#a9912b92d9e9f9ec6217a023f7d1d046e"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a195efb1de098d7d1990480b68a866ed1"></a><!-- doxytag: member="FAT32.h::firstDataSector" ref="a195efb1de098d7d1990480b68a866ed1" args="" -->
volatile unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>firstDataSector</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a141b615f923e667e5f1a3ae5383bfc1c"></a><!-- doxytag: member="FAT32.h::rootCluster" ref="a141b615f923e667e5f1a3ae5383bfc1c" args="" -->
volatile unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>rootCluster</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b38c32df25a8b72d4a58d3a08f98ae4"></a><!-- doxytag: member="FAT32.h::totalClusters" ref="a2b38c32df25a8b72d4a58d3a08f98ae4" args="" -->
volatile unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>totalClusters</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9c1a1edb108a9cec6c7c6a7de4a4020"></a><!-- doxytag: member="FAT32.h::bytesPerSector" ref="ab9c1a1edb108a9cec6c7c6a7de4a4020" args="" -->
volatile unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>bytesPerSector</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adfae3f231d9c524b2a1da486872e5536"></a><!-- doxytag: member="FAT32.h::sectorPerCluster" ref="adfae3f231d9c524b2a1da486872e5536" args="" -->
volatile unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>sectorPerCluster</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab83964e3360b51b496622eee5baa4fdf"></a><!-- doxytag: member="FAT32.h::reservedSectorCount" ref="ab83964e3360b51b496622eee5baa4fdf" args="" -->
volatile unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><b>reservedSectorCount</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92f9351dc6943803baabdc7d245a8721"></a><!-- doxytag: member="FAT32.h::unusedSectors" ref="a92f9351dc6943803baabdc7d245a8721" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>unusedSectors</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a237d717b3c479aa8072a49ec90b3cdea"></a><!-- doxytag: member="FAT32.h::appendFileSector" ref="a237d717b3c479aa8072a49ec90b3cdea" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>appendFileSector</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23876fd50ef181a38270e12ab918d447"></a><!-- doxytag: member="FAT32.h::appendFileLocation" ref="a23876fd50ef181a38270e12ab918d447" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>appendFileLocation</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a486df86cef253a40f9115fd866b3d3dd"></a><!-- doxytag: member="FAT32.h::fileSize" ref="a486df86cef253a40f9115fd866b3d3dd" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>fileSize</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae01f3af1e3e205987505b48eb3ce5d25"></a><!-- doxytag: member="FAT32.h::appendStartCluster" ref="ae01f3af1e3e205987505b48eb3ce5d25" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><b>appendStartCluster</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5feb40fa3b72b5b8360a7da8367498f"></a><!-- doxytag: member="FAT32.h::freeClusterCountUpdated" ref="ab5feb40fa3b72b5b8360a7da8367498f" args="" -->
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><b>freeClusterCountUpdated</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>FAT32 implementation of SD card ******************************************************** **** ROUTINES FOR FAT32 IMPLEMATATION OF SD CARD ***** ******************************************************** Controller: ATmega32 (Clock: 8 Mhz-internal) Compiler : AVR-GCC (winAVR with AVRStudio) Version : 2.3 Author : CC Dharmani, Chennai (India) www.dharmanitech.com Date : 08 May 2010</p>
<dl class="author"><dt><b>Author:</b></dt><dd>CC Dharmani, Chennai (India) </dd>
<dd>
Nick LaGrow (nlagrow) </dd>
<dd>
Alex Etling (petling) </dd>
<dd>
Kory Stiger (kstiger)</dd></dl>
<p>Link to the Post: <a href="http://www.dharmanitech.com/2009/01/sd-card-interfacing-with-atmega8-fat32.html">http://www.dharmanitech.com/2009/01/sd-card-interfacing-with-atmega8-fat32.html</a> </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a126f62cbfb84a23224d07d7eebb1f377"></a><!-- doxytag: member="FAT32.h::convertFileName" ref="a126f62cbfb84a23224d07d7eebb1f377" args="(unsigned char *fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char convertFileName </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts the input fileName (which is in FAT format) in the following fashion: &lt;filename.ext&gt; -----&gt; &lt;filename[padding to 8 chars]ext&gt; filename must be &lt;= 8 chars and ext must be &lt;= 3 chars. Thus, INT.MP3 becomes [INT MP3]. Also, capitalizes lowercase files. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>unsigned char* string which contains the file name that needs to be converted </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsigned char 1 for failure 0 for victory  Currently overwrites the passed in buffer so if you pass in the same buffer twice, it will have already converted the fileName (specifically removed the '.' which is what the invalid file check is done off of) </dd></dl>

</div>
</div>
<a class="anchor" id="aae257afc618304098844252c3d71b788"></a><!-- doxytag: member="FAT32.h::deleteFile" ref="aae257afc618304098844252c3d71b788" args="(unsigned char *fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deleteFile </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function deletes the specified file in the root directory </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>- unsigned char *, file name of file that you want deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="ac038c8795e541cbd5a33eda705b01934"></a><!-- doxytag: member="FAT32.h::displayMemory" ref="ac038c8795e541cbd5a33eda705b01934" args="(unsigned char flag, unsigned long memory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayMemory </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>memory</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function converts the unsigned long value of memory into text string and send ot UART </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flag</em>&nbsp;</td><td>- unsigned char, if HIGH - memory will be displayed in KBytes. else in Bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>memory</em>&nbsp;</td><td>- unsigned long, memory value </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="acb92769ff06a9d54732e7ff22ec07eef"></a><!-- doxytag: member="FAT32.h::findFiles" ref="acb92769ff06a9d54732e7ff22ec07eef" args="(unsigned char flag, unsigned char *fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdir___structure.html">dir_Structure</a>* findFiles </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function gets DIR/FILE list or a single file address or deletes specified file </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flag</em>&nbsp;</td><td>- unsigned char, can be GET_LIST, GET_FILE or DELETE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>- unsinged char *, pointer to the file name to operate on </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>struct <a class="el" href="structdir___structure.html">dir_Structure</a> * - first cluster of file if flag = GET_FILE print file/dir list if flag = GET_LIST. Delete file if flag = DELETE </dd></dl>

</div>
</div>
<a class="anchor" id="a546d211c1f6659e26fc0eae87393bff0"></a><!-- doxytag: member="FAT32.h::freeMemoryUpdate" ref="a546d211c1f6659e26fc0eae87393bff0" args="(unsigned char flag, unsigned long size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freeMemoryUpdate </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function updates the free memory count in FSinfo sector. Whenever a file is deleted or created, this function will be called to ADD or REMOVE clusters occupied by teh file </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flag</em>&nbsp;</td><td>- unsigned char, can be ADD or REMOVE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>- unsigned long, file size in Bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="a1a404adb1477372c136ee3d8ec370bef"></a><!-- doxytag: member="FAT32.h::getBootSectorData" ref="a1a404adb1477372c136ee3d8ec370bef" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char getBootSectorData </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads in data data from boot sector and checks to make sure that it is the FAT32 standard. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsigned char - return 0 on successful read return 1 on error of file system or if not read properly </dd></dl>

</div>
</div>
<a class="anchor" id="a7e2988f898a6b56ba385ae2c34128a86"></a><!-- doxytag: member="FAT32.h::getFirstSector" ref="a7e2988f898a6b56ba385ae2c34128a86" args="(unsigned long clusterNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long getFirstSector </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>clusterNumber</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>calculates the first sector address of any given cluster </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clusterNumber</em>&nbsp;</td><td>- unsigned long, cluster number on which first sector found </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsgined long - first secotr address </dd></dl>

</div>
</div>
<a class="anchor" id="a44efd4747cb07a0a1cf3784c838b6a6e"></a><!-- doxytag: member="FAT32.h::getSetFreeCluster" ref="a44efd4747cb07a0a1cf3784c838b6a6e" args="(unsigned char totOrNext, unsigned char get_set, unsigned long FSEntry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long getSetFreeCluster </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>totOrNext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>get_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>FSEntry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function is used to get or set next free cluster or total free clusters in FSinfo sector of SD card. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>totOrNext</em>&nbsp;</td><td>- unsigned char, can be either TOTAL_FREE or NEXT_FREE </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>get_set</em>&nbsp;</td><td>- unsigned char, flag that can be GET or SEt </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FSEntry</em>&nbsp;</td><td>- unsigned long, new FS entry when arg2 is SET or 0 when GET </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsigned long - next free cluster if arg1 is NEXT_FREE and arg2 is GET total # of free clusters if arg1 is TOTAL_FREE and arg2 GET. 0xffffffff if any error or arg2 is Set </dd></dl>

</div>
</div>
<a class="anchor" id="ab0d24683088974e34e652dcf46037c9f"></a><!-- doxytag: member="FAT32.h::getSetNextCluster" ref="ab0d24683088974e34e652dcf46037c9f" args="(unsigned long clusterNumber, unsigned char get_set, unsigned long clusterEntry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long getSetNextCluster </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>clusterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>get_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>clusterEntry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get cluster entry value from FAT to find out the next cluster in chain </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clusterNumber</em>&nbsp;</td><td>- unsinged long, current cluster number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>get_set</em>&nbsp;</td><td>- unsigned char, get - if next sector is to be got, and set if next sector is to be set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clusterEntry</em>&nbsp;</td><td>- unsigned long, next cluster number if arg2 = Set, else = 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsinged long - next cluster number if arg2 = get, else 0 </dd></dl>

</div>
</div>
<a class="anchor" id="a9912b92d9e9f9ec6217a023f7d1d046e"></a><!-- doxytag: member="FAT32.h::InitSDCard" ref="a9912b92d9e9f9ec6217a023f7d1d046e" args="(bool bVerb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitSDCard </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>bVerb</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks the SD card, communicates with computer to let know what type of card and sets up the rest of the SD card. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bVerb</em>&nbsp;</td><td>bool Determines whether of not you are communicating found data to the computer www::dharmanitech::com </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="a8b15151c2fa2f87cfcb8ff703c4d64cc"></a><!-- doxytag: member="FAT32.h::memoryStatistics" ref="a8b15151c2fa2f87cfcb8ff703c4d64cc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memoryStatistics </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function displays the total memory and free memory of SD Card using UART NOTE: this routine can take upto 15sec for 1GB card ( clock) it tries to read from SD whether a free cluster count is stored, if it is stored then it will return immediately. Otherwise it will count the total number of free clusters, which takes time </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Void </dd></dl>

</div>
</div>
<a class="anchor" id="afdef267b8305837acbd02add6ad7f23e"></a><!-- doxytag: member="FAT32.h::PlayMP3file" ref="afdef267b8305837acbd02add6ad7f23e" args="(unsigned char *fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char PlayMP3file </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function plays a given MP3 files, until: 1. The files reach the end of file 2. Stop playing command issued from the controller. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>- unsighed char *, simply name of the file to operate on </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsigned char - return 0 on success return 2 on error converting fileName </dd></dl>

</div>
</div>
<a class="anchor" id="aee620dcede02bf8349f704e598d90d89"></a><!-- doxytag: member="FAT32.h::readAndRetreiveFileContents" ref="aee620dcede02bf8349f704e598d90d89" args="(unsigned char *fileName, unsigned char *dataString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char readAndRetreiveFileContents </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>dataString</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This file just reads in data from the given fileName if it can find and and process the file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>char * That contains the file name of what you want to read dataString char * Where the data is put, can store 100 bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>unsigned char - number where 0 means success 1 means that you could not convert fileName 2 means file does not exists 3 will mean inability to read a cluster </dd></dl>

</div>
</div>
<a class="anchor" id="ab213e22a70270c138864e3075aa51fb8"></a><!-- doxytag: member="FAT32.h::readFile" ref="ab213e22a70270c138864e3075aa51fb8" args="(unsigned char flag, unsigned char *fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char readFile </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Can act as a reader or verifier depending on the flag sent in in flag If it is VERIFY- just wil let you know if the file is there. If it is read then it actually reads in the contents of the file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flag</em>&nbsp;</td><td>- unsigned char, flag=READ then to read file from SD card and send contents to UART. if flag=VERIFY then functions will verify whether a specified file is already existing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>- unsigned char *, the file you are reading or verifying </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>char - returns 0 on success returns 1 if files already exists and flag = Verify returns 2 on error convertingFileName </dd></dl>

</div>
</div>
<a class="anchor" id="a1fea385b9800617fcb1cad4f5493ea67"></a><!-- doxytag: member="FAT32.h::ReplaceTheContentOfThisFileWith" ref="a1fea385b9800617fcb1cad4f5493ea67" args="(unsigned char *fileName, unsigned char *fileContent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ReplaceTheContentOfThisFileWith </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileContent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>reads the data in fileContent into buffer and uses the function <a class="el" href="_s_d__routines_8c.html#aa72e78c5d2b4664dfdbb339030a1798c" title="Writes a single block of SD Card. Data that is written is put into the buffer variables...">SD_writeSingleBlock()</a> to put the value in buffer onto the SD card Data you are writing in MUST END IN $. If not garbage will be written in. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>- unsigned char *, This contains the file to replace data in </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fileContent</em>&nbsp;</td><td>- unsighed char *, What to put into fileName </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>int - returns 0 if the file exists you are trying to overwrite returns 1 if the file does not exist </dd></dl>

</div>
</div>
<a class="anchor" id="a92d056bee6b45c23b0b06fd4390daaba"></a><!-- doxytag: member="FAT32.h::searchNextFreeCluster" ref="a92d056bee6b45c23b0b06fd4390daaba" args="(unsigned long startCluster)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long searchNextFreeCluster </td>
          <td>(</td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>startCluster</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function searches for the next free cluster in the root directory starting at specified cluster </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>startCluster</em>&nbsp;</td><td>- unsinged long, starting cluster </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>usigned long, the number of the next free cluster </dd></dl>

</div>
</div>
<a class="anchor" id="a18f109c80cfc13f98d54b936a8f89f1a"></a><!-- doxytag: member="FAT32.h::writeFile" ref="a18f109c80cfc13f98d54b936a8f89f1a" args="(unsigned char *fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeFile </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function creates a file in FAT32 format in the root directory if given file name does not exists. If it already exists then append data to end </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>- unsigned char *, this is the name of the file to write to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Void </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 18 Feb 2013 for SABT Software by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
